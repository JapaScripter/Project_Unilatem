<!DOCTYPE html>
<html>
  <head>
    <!--|Meta Config.|-->
    <meta name="viewport" charset="utf-8" content="width=device-width initial-scale= 1.0">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
    <meta name="description" content="Unilatem">
    <meta name="author" content="Unilatem">
    <link rel="shortcut icon" href="images/favicon.ico">
    <!--|Meta Config.|-->

    <!--|Title Tab|-->
    <title>Casamento</title>
    <!--|Title Tab|-->

    <!--|CSS|-->
    <link rel="stylesheet" href="stylecasamento.css">
    <!--|CSS|-->

    <!--|Animation|-->
    <script>document.addEventListener("DOMContentLoaded",(function(){AOS.init()}));</script>
    <!--|Animation|-->
  </head>
  <body>
    <section class="sec3">
      <a href="/casamento.html">
        <img src="imagescasamento/arrow.svg" class="sec3_im1">
      </a>
      <div class="sec3_div">
        <h2 class="sec3_tt1">APONTE A CÂMERA NO QRCODE</h2>
        <img id="qrcode" name="qrcode">
      </div>
      <h2 class="sec3_tt1">Mande sua mensagem de carinho!!!</h2>
      <div class="sec3_div1">
        <div class="sec3_div2">
          <img class="sec3_img" id="fotoproduto" name="fotoproduto" readonly>
        </div>
        <form class="forms" id="form-compra" action="https://formspree.io/f/mvgglqwl" method="POST">
          <p id="mensagemErro">Por favor, preencha todos os campos.</p>
          <label class="sec3_lb">Seu Nome:<input class="sec3_input" type="text" id="nome" name="nome" required></label>
          <label class="sec3_lb" for="produto">Seu Presente:<input class="sec3_input" type="text" id="produto" name="produto" readonly></label>
          <label class="sec3_lb" for="valor">Valor:<input class="sec3_input" type="text" id="valor" name="valor" readonly></label>
          <label class="sec3_lb">Sua Mensagem:<textarea class="sec3_textarea" id="mensagem" name="message" required></textarea></label>

          <button id="botaosubmeter" class="sec3_bt" type="submit">Presentear</button>
        </form>
      </div>
    </section>

    <!--|Script|-->
    <script>
    window.onload = function() {
      // Recupera os dados do localStorage
      const nomeProduto = localStorage.getItem('produto');
      const valorProduto = localStorage.getItem('valor');
      const fotoProduto = localStorage.getItem('foto');

      // Preenche os campos do formulário com os dados do produto
      document.getElementById('produto').value = nomeProduto;
      document.getElementById('valor').value = valorProduto;
      document.getElementById('fotoproduto').src = fotoProduto;

      // Atualiza o QR Code de acordo com o valor do produto
      const qrCodeImage = document.getElementById('qrcode');
      
      // Definir a URL do QR code baseado no valor do produto
      let qrCodeUrl = '';

      // Abaixo definimos os QR codes com base nos valores
      switch (valorProduto) {
        case 'R$ 100,00':
          qrCodeUrl = 'imagescasamento/100.png';
          break;
        case 'R$ 200,00':
          qrCodeUrl = 'imagescasamento/200.png';
          break;
        case 'R$ 300,00':
          qrCodeUrl = 'imagescasamento/300.png';
          break;
        case 'R$ 400,00':
          qrCodeUrl = 'imagescasamento/400.png';
          break;
        case 'R$ 500,00':
          qrCodeUrl = 'imagescasamento/500.png';
          break;
        case 'R$ 600,00':
          qrCodeUrl = 'imagescasamento/600.png';
          break;
        case 'R$ 700,00':
          qrCodeUrl = 'imagescasamento/700.png';
          break;
        case 'R$ 800,00':
          qrCodeUrl = 'imagescasamento/800.png';
          break;
        case 'R$ 900,00':
          qrCodeUrl = 'imagescasamento/900.png';
          break;
        case 'R$ 1000,00':
          qrCodeUrl = 'imagescasamento/1000.png';
          break;
        case 'R$ 2000,00':
          qrCodeUrl = 'imagescasamento/2000.png';
          break;
        default:
          qrCodeUrl = 'imagescasamento/100.png'; // Padrão caso o valor não seja encontrado
      }

      // Atualiza a imagem do QR Code
      qrCodeImage.src = qrCodeUrl;
    };

    const botaoCliente = document.getElementById('botaosubmeter');
    const mensagemErro = document.getElementById('mensagemErro');

    // Função para validar o formulário
    botaoCliente.addEventListener('click', function(event) {
      // Pegue os valores mais atualizados dos campos ao clicar
      const nomeCliente = document.getElementById('nome').value;
      const mensagemCliente = document.getElementById('mensagem').value;

      // Verifica se os campos nome e mensagem estão vazios
      if (nomeCliente === '' || mensagemCliente === '') {
        // Exibe uma mensagem de erro
        mensagemErro.style.display = 'flex';
        event.preventDefault(); // Impede o envio do formulário
      } else {
        // Caso todos os campos sejam preenchidos, oculta a mensagem de erro
        mensagemErro.style.display = 'none';
      }
    });
    </script>
    <!--|Script|-->
  </body>
</html>
